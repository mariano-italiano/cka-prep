# CKA Exam Practice Tasks â€“ 5 per Domain

## Cluster Architecture, Installation & Configuration (25%)

### Task 1: Install a Kubernetes cluster with kubeadm using pod network CIDR 10.244.0.0/16 and deploy Flannel CNI.

**Solution:**

```bash
sudo kubeadm init --pod-network-cidr=10.244.0.0/16
mkdir -p $HOME/.kube
sudo cp /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config
kubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml
```


### Task 2: Create a high-availability control plane with three masters and external etcd.

**Solution:**

```bash
Follow kubeadm HA docs: setup external etcd, then join control-plane nodes with `--control-plane`.
```


### Task 3: Create a ClusterRole named `pod-reader` with get, list, watch on pods and bind to user `dev-user`.

**Solution:**

```bash
kubectl create clusterrole pod-reader --verb=get,list,watch --resource=pods
kubectl create clusterrolebinding pod-reader-binding --clusterrole=pod-reader --user=dev-user
```


### Task 4: Install Helm on the cluster and deploy nginx via Helm chart.

**Solution:**

```bash
curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash
helm repo add bitnami https://charts.bitnami.com/bitnami
helm install my-nginx bitnami/nginx
```


### Task 5: Deploy a CRD and create a resource from it.

**Solution:**

```bash
Apply CRD YAML, then create a custom resource as defined.
```


## Workloads & Scheduling (15%)

### Task 1: Deploy an nginx Deployment with 3 replicas and update image to nginx:1.25 with zero downtime.

**Solution:**

```bash
kubectl create deployment web --image=nginx:1.24 --replicas=3
kubectl set image deployment/web nginx=nginx:1.25
kubectl rollout status deployment/web
```


### Task 2: Create a Job that runs busybox and prints 'Hello CKA'.

**Solution:**

```bash
kubectl create job hello --image=busybox -- echo 'Hello CKA'
```


### Task 3: Create a CronJob to run every 5 minutes printing date.

**Solution:**

```bash
kubectl create cronjob date-job --image=busybox --schedule='*/5 * * * *' -- date
```


### Task 4: Run a Pod on a node with label `disk=ssd`.

**Solution:**

```bash
kubectl label node <node-name> disk=ssd && kubectl run node-pod --image=busybox --restart=Never --overrides='{"spec":{"nodeSelector":{"disk":"ssd"}}}' -- sleep 3600
```


### Task 5: Limit a Pod to 100m CPU and 128Mi memory.

**Solution:**

```bash
Specify resources.limits and resources.requests in Pod manifest.
```


## Services & Networking (20%)

### Task 1: Expose deployment `web` as NodePort on port 30080.

**Solution:**

```bash
kubectl expose deployment web --port=80 --target-port=80 --type=NodePort --name=web-service
kubectl patch service web-service -p '{"spec":{"ports":[{"nodePort":30080,"port":80}]}}'
```


### Task 2: Create an Ingress resource for `web` serving at `/`.

**Solution:**

```bash
Define Ingress YAML with rules.host, http.paths pointing to web-service.
```


### Task 3: Apply a NetworkPolicy allowing traffic only from pods with label access=true.

**Solution:**

```bash
Create NetworkPolicy YAML with podSelector and ingress.from.podSelector.
```


### Task 4: Enable Gateway API and create HTTPRoute.

**Solution:**

```bash
Install Gateway API CRDs and apply HTTPRoute manifest.
```


### Task 5: Verify DNS resolution from a busybox pod.

**Solution:**

```bash
kubectl exec -it <pod> -- nslookup kubernetes.default
```


## Storage (10%)

### Task 1: Create a PersistentVolume and PersistentVolumeClaim of size 1Gi.

**Solution:**

```bash
Define PV with hostPath or storage backend and PVC requesting 1Gi.
```


### Task 2: Deploy a Pod using PVC `pvc-data`.

**Solution:**

```bash
Mount PVC in Pod spec.volumes.
```


### Task 3: Create a StorageClass with reclaimPolicy=Retain.

**Solution:**

```bash
Define StorageClass YAML with reclaimPolicy: Retain.
```


### Task 4: Expand a PVC from 1Gi to 2Gi.

**Solution:**

```bash
Edit PVC spec.resources.requests.storage and ensure SC allows expansion.
```


### Task 5: Create a ReadWriteMany PVC using NFS backend.

**Solution:**

```bash
Define PVC with accessModes: ReadWriteMany and NFS PV.
```


## Troubleshooting (30%)

### Task 1: Fix a Pod in CrashLoopBackOff.

**Solution:**

```bash
Check logs with kubectl logs, describe pod, identify and fix the issue.
```


### Task 2: Investigate node NotReady status.

**Solution:**

```bash
kubectl describe node, check kubelet logs, systemctl status kubelet.
```


### Task 3: Debug a failing Service not reachable from another pod.

**Solution:**

```bash
Check Endpoints, DNS resolution, NetworkPolicy rules.
```


### Task 4: Fix CoreDNS crash in kube-system namespace.

**Solution:**

```bash
kubectl logs, inspect ConfigMap, restart coredns deployment.
```


### Task 5: Identify cause of high CPU usage in a pod.

**Solution:**

```bash
kubectl top pod, inspect logs, optimize workload or adjust limits.
```

